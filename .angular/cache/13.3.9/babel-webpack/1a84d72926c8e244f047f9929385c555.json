{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, NgModule } from '@angular/core';\nimport * as i1 from '@angular/router';\nimport { of, pipe } from 'rxjs';\nimport { map, take, switchMap } from 'rxjs/operators';\nimport * as i2 from '@angular/fire/auth';\nimport { user } from '@angular/fire/auth';\nimport { registerVersion } from 'firebase/app';\nimport { VERSION } from '@angular/fire';\nconst loggedIn = /*#__PURE__*/map(user => !!user);\nlet AuthGuard = /*#__PURE__*/(() => {\n  class AuthGuard {\n    constructor(router, auth) {\n      this.router = router;\n      this.auth = auth;\n\n      this.canActivate = (next, state) => {\n        const authPipeFactory = next.data.authGuardPipe || (() => loggedIn);\n\n        return user(this.auth).pipe(take(1), authPipeFactory(next, state), map(can => {\n          if (typeof can === 'boolean') {\n            return can;\n          } else if (Array.isArray(can)) {\n            return this.router.createUrlTree(can);\n          } else {\n            // TODO(EdricChan03): Add tests\n            return this.router.parseUrl(can);\n          }\n        }));\n      };\n    }\n\n  }\n\n  AuthGuard.ɵfac = function AuthGuard_Factory(t) {\n    return new (t || AuthGuard)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.Auth));\n  };\n\n  AuthGuard.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: AuthGuard,\n    factory: AuthGuard.ɵfac,\n    providedIn: 'any'\n  });\n  return AuthGuard;\n})();\n\n/*#__PURE__*/\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst canActivate = pipe => ({\n  canActivate: [AuthGuard],\n  data: {\n    authGuardPipe: pipe\n  }\n});\n\nconst isNotAnonymous = /*#__PURE__*/map(user => !!user && !user.isAnonymous);\nconst idTokenResult = /*#__PURE__*/switchMap(user => user ? user.getIdTokenResult() : of(null));\nconst emailVerified = /*#__PURE__*/map(user => !!user && user.emailVerified);\nconst customClaims = /*#__PURE__*/pipe(idTokenResult, /*#__PURE__*/map(idTokenResult => idTokenResult ? idTokenResult.claims : []));\n\nconst hasCustomClaim = claim => pipe(customClaims, map(claims => claims.hasOwnProperty(claim)));\n\nconst redirectUnauthorizedTo = redirect => pipe(loggedIn, map(loggedIn => loggedIn || redirect));\n\nconst redirectLoggedInTo = redirect => pipe(loggedIn, map(loggedIn => loggedIn && redirect || true));\n\nlet AuthGuardModule = /*#__PURE__*/(() => {\n  class AuthGuardModule {\n    constructor() {\n      registerVersion('angularfire', VERSION.full, 'auth-guard');\n    }\n\n  }\n\n  AuthGuardModule.ɵfac = function AuthGuardModule_Factory(t) {\n    return new (t || AuthGuardModule)();\n  };\n\n  AuthGuardModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: AuthGuardModule\n  });\n  AuthGuardModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    providers: [AuthGuard]\n  });\n  return AuthGuardModule;\n})();\n\n/*#__PURE__*/\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { AuthGuard, AuthGuardModule, canActivate, customClaims, emailVerified, hasCustomClaim, idTokenResult, isNotAnonymous, loggedIn, redirectLoggedInTo, redirectUnauthorizedTo }; //# sourceMappingURL=angular-fire-auth-guard.js.map","map":null,"metadata":{},"sourceType":"module"}